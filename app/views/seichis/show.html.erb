<%= render "shared/header" %>

<h2 class="seichi-show-title">聖地詳細</h2>

<div class="seichi-show">
  <div class="show-content">
    <ul class="show-lists">
      <li class="show-list">
        投稿者：<%= link_to @seichi.user.nickname, user_path(@seichi.user_id) %>
      </li>
      <li class="show-list">
        作品名：<%= @seichi.title %>
      </li>
      <li class="show-list">
        聖地の紹介：<%= @seichi.introduction %>
      </li>
      <li class="show-list">
        作品の分類：<%= @seichi.category[:name] %>
      </li>
      <li class="show-list">
        聖地の住所：<%= @seichi.prefecture[:name] %><%= @seichi.addresses %>
      </li>
      <span id="latitude-show" style="display: none;">
        <%= @seichi.latitude %>
      </span>
      <span id="longitude-show" style="display: none;">
        <%= @seichi.longitude%>
      </span>
     </ul>
    <%= image_tag @seichi.image ,class:"seichi-box-img" %>
   
    
    <div id="map-show"></div>
    
    <div class="commentform">
      <% if user_signed_in? %>
        <%= form_with(model: [@seichi, @comment], local: true) do |form| %>
          <%= form.text_area :text, placeholder: "コメントする", rows: "2" %>
          <%= form.submit "SEND" %>
        <% end %>
      <% else %>
        <strong><p>※※※ コメントの投稿には新規登録/ログインが必要です ※※※</p></strong>
      <% end %>
    </div>
    <div class="comments">
      <h4>＜コメント一覧＞</h4>
      <% @comments.each do |comment| %>
        <p>
          <strong><%= link_to comment.user.nickname, user_path(comment.user_id)%>：</strong>
          <%= comment.text %>
        </p>
        <% if user_signed_in? && current_user.id == comment.user_id %>
          <%= link_to "削除する", seichi_comment_path(comment.seichi_id, comment.id), data: { turbo_method: :delete } %>
        <% end %>
      <% end %>
      <%# お気に入り機能実装 %>
      <%= render partial: "shared/favorite", locals: { seichi: @seichi } %>
      <%# お気に入り機能実装 %>

    </div>
    <% if user_signed_in? && current_user.id == @seichi.user_id %>
      <%= link_to "編集する", edit_seichi_path(@seichi.id) %>
      <%= link_to "削除する", seichi_path(@seichi.id), data: { turbo_method: :delete } %>
    <% end %>
    <%= link_to "トップページへ戻る", root_path %>  
  </div>
</div>

